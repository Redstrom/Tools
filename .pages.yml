# Pages CMS – Configuration principale
# Déposez ce fichier à la RACINE du dépôt : /.pages.yml

# Dossier médias par défaut (peut être surchargé par champ)
media_folder: "assets/media"
public_folder: "/assets/media"

# --- Collections ---
collections:
  # ==========================
  # JEUX
  # ==========================
  - label: "Jeux"
    name: "games"
    folder: "content/games"
    create: true
    extension: "json"
    format: "json"
    slug: "{{slug}}"
    fields:
      - { label: "Nom", name: "name", widget: "string" }
      - { label: "Slug", name: "slug", widget: "string" }

      - label: "Statut"
        name: "status"
        widget: "select"
        options:
          - { label: "Actif", value: "actif" }
          - { label: "Archivé", value: "archive" }
        default: "actif"
        required: false

      - label: "Cover (16:9 – 1280×720 recommandé)"
        name: "cover"
        widget: "image"
        media_folder: "assets/media/games"
        public_folder: "/assets/media/games"
        required: false

      - { label: "Description courte", name: "short", widget: "text", required: false }
      - { label: "Éditeur / Studio", name: "publisher", widget: "string", required: false }

      # Liste simple de tags => [{ "tag":"..." }, ...]
      - label: "Tags"
        name: "tags"
        widget: "list"
        field: { label: "Tag", name: "tag", widget: "string" }
        required: false
        default: []

      # Métriques optionnelles (affichées si présentes)
      - { label: "Players (ex: 180.0M)", name: "players", widget: "string", required: false }
      - { label: "Servers (ex: 1250)", name: "servers", widget: "string", required: false }
      - { label: "Trend (ex: 98%)", name: "trend", widget: "string", required: false }

  # ==========================
  # BUILDS
  # ==========================
  - label: "Builds"
    name: "builds"
    folder: "content/builds"
    create: true
    extension: "json"
    format: "json"
    slug: "{{slug}}"
    fields:
      - { label: "Titre", name: "title", widget: "string" }
      - { label: "Slug", name: "slug", widget: "string" }

      # Référence vers un JEU : on enregistre le CHEMIN JSON, lu par ton script d'indexation
      - label: "Jeu lié"
        name: "game"
        widget: "relation"
        collection: "games"
        search_fields: ["name"]
        display_fields: ["name"]
        value_field: "content/games/{{slug}}.json"
        required: false

      - { label: "Nom du jeu (affichage – facultatif si 'Jeu lié' est utilisé)", name: "gameName", widget: "string", required: false }

      - label: "Tier"
        name: "tier"
        widget: "select"
        options: ["S","A","B","C"]
        required: false

      - { label: "Version", name: "version", widget: "string", required: false }
      - { label: "Résumé (courte intro)", name: "summary", widget: "text", required: false }

      # Difficulté : texte OU étoiles (1..5). Le front convertit le texte en étoiles si 'difficultyStars' est vide.
      - label: "Difficulté (texte)"
        name: "difficulty"
        widget: "select"
        options:
          - { label: "Facile", value: "facile" }
          - { label: "Moyen", value: "moyen" }
          - { label: "Difficile", value: "difficile" }
          - { label: "Expert", value: "expert" }
        required: false

      - label: "Difficulté (étoiles)"
        name: "difficultyStars"
        widget: "number"
        min: 1
        max: 5
        required: false

      # Coût (0..5 pièces)
      - label: "Coût (pièces, 0..5)"
        name: "cost"
        widget: "number"
        min: 0
        max: 5
        required: false

      - label: "Cover (16:9 – 1280×720 recommandé)"
        name: "cover"
        widget: "image"
        media_folder: "assets/media/builds"
        public_folder: "/assets/media/builds"
        required: false

      - { label: "Mise à jour (ISO)", name: "updatedAt", widget: "datetime", required: false }

      # Corps riche : on stocke du HTML (ou markdown → rendu front tel quel)
      - { label: "Corps (HTML/Markdown)", name: "body", widget: "text", required: false }

  # ==========================
  # GUIDES
  # ==========================
  - label: "Guides"
    name: "guides"
    folder: "content/guides"
    create: true
    extension: "json"
    format: "json"
    slug: "{{slug}}"
    fields:
      - { label: "Titre", name: "title", widget: "string" }
      - { label: "Slug", name: "slug", widget: "string" }

      - label: "Jeu lié"
        name: "game"
        widget: "relation"
        collection: "games"
        search_fields: ["name"]
        display_fields: ["name"]
        value_field: "content/games/{{slug}}.json"
        required: false

      - { label: "Nom du jeu (affichage – facultatif)", name: "gameName", widget: "string", required: false }

      - { label: "Ressource (ex: Or, XP…)", name: "resource", widget: "string", required: false }
      - { label: "Route / Plan", name: "route", widget: "text", required: false }

      # Liste simple de tips => [{ "tip":"..." }, ...]
      - label: "Tips"
        name: "tips"
        widget: "list"
        field: { label: "Tip", name: "tip", widget: "string" }
        required: false
        default: []

      - label: "Cover (16:9 – 1280×720 recommandé)"
        name: "cover"
        widget: "image"
        media_folder: "assets/media/guides"
        public_folder: "/assets/media/guides"
        required: false

      - { label: "Date", name: "date", widget: "datetime", required: false }
      - { label: "Corps (HTML/Markdown)", name: "body", widget: "text", required: false }

  # ==========================
  # OUTILS
  # ==========================
  - label: "Outils"
    name: "tools"
    folder: "content/tools"
    create: true
    extension: "json"
    format: "json"
    slug: "{{slug}}"
    fields:
      - { label: "Titre", name: "title", widget: "string" }
      - { label: "Slug", name: "slug", widget: "string", required: false }

      - label: "Type"
        name: "kind"
        widget: "select"
        options:
          - { label: "Overlay", value: "Overlay" }
          - { label: "Plugin",  value: "Plugin" }
          - { label: "Site",    value: "Site" }
          - { label: "Autre",   value: "Autre" }
        required: false

      - { label: "URL", name: "url", widget: "string", required: false }
      - { label: "Notes", name: "notes", widget: "text", required: false }

      - label: "Jeu lié"
        name: "game"
        widget: "relation"
        collection: "games"
        search_fields: ["name"]
        display_fields: ["name"]
        value_field: "content/games/{{slug}}.json"
        required: false

      - label: "Cover (16:9 – 1280×720 recommandé)"
        name: "cover"
        widget: "image"
        media_folder: "assets/media/tools"
        public_folder: "/assets/media/tools"
        required: false

      - { label: "Corps (HTML/Markdown)", name: "body", widget: "text", required: false }
